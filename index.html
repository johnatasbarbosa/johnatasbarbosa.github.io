<!DOCTYPE html>
<html>
<body>

<h1>DOM touchmove Event</h1>

<h3>1 - Trabalho</h3>
<p>
    Anda
</p>
<div class="vezesDias" data-id="ipac_1b" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_1c_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_1c_m" style="display: inline-block;"></div>

<p>
    Atividades moderadas
</p>
<div class="vezesDias" data-id="ipac_1d" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_1e_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_1e_m" style="display: inline-block;"></div>

<p>
    Atividades vigorosas
</p>
<div class="vezesDias" data-id="ipac_1f" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_1g_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_1g_m" style="display: inline-block;"></div>


<h3>2 - Meio de transporte</h3>
<p>
    Andou de carro, ônibus, metrô ou trem
</p>
<div class="vezesDias" data-id="ipac_2a" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_2b_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_2b_m" style="display: inline-block;"></div>

<p>
    Andou de bicicleta
</p>
<div class="vezesDias" data-id="ipac_2c" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_2d_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_2d_m" style="display: inline-block;"></div>

<p>
    Caminhou
</p>
<div class="vezesDias" data-id="ipac_2e" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_2f_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_2f_m" style="display: inline-block;"></div>


<h3>3 - Atividade física em casa:</h3>
<p>
    Atividades moderadas no jardim ou quintal
<div class="vezesDias" data-id="ipac_3a" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_3b_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_3b_m" style="display: inline-block;"></div>

<p>
    Atividades moderadas dentro de casa
</p>
<div class="vezesDias" data-id="ipac_3c" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_3d_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_3d_m" style="display: inline-block;"></div>

<p>
    Atividades vigorosas
</p>
<div class="vezesDias" data-id="ipac_3e" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_3f_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_3f_m" style="display: inline-block;"></div>


<h3>4 - Lazer</h3>
<p>
    Caminhada
</p>
<div class="vezesDias" data-id="ipac_4a" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_4b_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_4b_m" style="display: inline-block;"></div>

<p>
    Atividades moderadas
</p>
<div class="vezesDias" data-id="ipac_4c" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_4d_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_4d_m" style="display: inline-block;"></div>

<p>
    Atividades vigorosas
</p>
<div class="vezesDias" data-id="ipac_4e" style="display: inline-block;"></div>
<div class="horas" data-id="ipac_4f_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_4f_m" style="display: inline-block;"></div>


<h3>5 - Sentado</h3>
<p>
    Dia da semana
</p>
<div class="horas" data-id="ipac_5b_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_5b_m" style="display: inline-block;"></div>

<p>
    Dia de final de semana
</p>
<div class="horas" data-id="ipac_5b_h" style="display: inline-block;"></div>
<div class="minutos" data-id="ipac_5b_m" style="display: inline-block;"></div>
    
<br>
<p>
    <button onclick="calcular()">Calcular</button>
</p>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<script>
    var vezesDias = "<select id='idSelect'>"+
                        "<option value='0'>Nenhum</option>"+
                        "<option value='1'>1</option>"+
                        "<option value='2'>2</option>"+
                        "<option value='3'>3</option>"+
                        "<option value='4'>4</option>"+
                        "<option value='5'>5</option>"+
                        "<option value='6'>6</option>"+
                        "<option value='7'>7</option>"+
                    "</select>";

    var horas = "<select id='idSelect'>"+
                    "<option value='00'>00</option>"+
                    "<option value='01'>01</option>"+
                    "<option value='02'>02</option>"+
                    "<option value='03'>03</option>"+
                    "<option value='04'>04</option>"+
                    "<option value='05'>05</option>"+
                    "<option value='06'>06</option>"+
                    "<option value='07'>07</option>"+
                    "<option value='08'>08</option>"+
                    "<option value='09'>09</option>"+
                    "<option value='10'>10</option>"+
                    "<option value='11'>11</option>"+
                    "<option value='12'>12</option>"+
                    "<option value='13'>13</option>"+
                    "<option value='14'>14</option>"+
                    "<option value='15'>15</option>"+
                    "<option value='16'>16</option>"+
                    "<option value='17'>17</option>"+
                    "<option value='18'>18</option>"+
                    "<option value='19'>19</option>"+
                    "<option value='20'>20</option>"+
                    "<option value='21'>21</option>"+
                    "<option value='22'>22</option>"+
                    "<option value='23'>23</option>"+
                    "<option value='24'>24</option>"+
                "</select>";

    var minutos = "<select id='idSelect'>"+
                        "<option value='00'>00</option>"+
                        "<option value='10'>10</option>"+
                        "<option value='20'>20</option>"+
                        "<option value='30'>30</option>"+
                        "<option value='40'>40</option>"+
                        "<option value='50'>50</option>"+
                    "</select>";

    var elementosVezesDias = $(".vezesDias");
    elementosVezesDias.each(function(element){
        // console.log(this);
        var dataId = $(this).attr("data-id");
        var e = vezesDias.replace("idSelect", dataId);
        $(this).html(e);
    })
    
    var elementoshoras = $(".horas");
    elementoshoras.each(function(element){
        // console.log(this);
        var dataId = $(this).attr("data-id");
        var e = horas.replace("idSelect", dataId);
        $(this).html(e);
    })
    
    var elementosminutos = $(".minutos");
    elementosminutos.each(function(element){
        // console.log(this);
        var dataId = $(this).attr("data-id");
        var e = minutos.replace("idSelect", dataId);
        $(this).html(e);
    })
    
</script>
<script>
    moment("00:20:00", "HH:mm:ss").isBefore(moment("00:29:00", "HH:mm:ss"))

    function IpacAnswer(){
        this.ipac_1a = getBySelect("ipac_1a");
        this.ipac_1b = getBySelect("ipac_1b");
        this.ipac_1c = getBySelect_time("ipac_1c");
        this.ipac_1d = getBySelect("ipac_1d");
        this.ipac_1e = getBySelect_time("ipac_1e");
        this.ipac_1f = getBySelect("ipac_1f");
        this.ipac_1g = getBySelect_time("ipac_1g");

        this.ipac_2a = getBySelect("ipac_2a");
        this.ipac_2b = getBySelect_time("ipac_2b");
        this.ipac_2c = getBySelect("ipac_2c");
        this.ipac_2d = getBySelect_time("ipac_2d");
        this.ipac_2e = getBySelect("ipac_2e");
        this.ipac_2f = getBySelect_time("ipac_2f");

        this.ipac_3a = getBySelect("ipac_3a");
        this.ipac_3b = getBySelect_time("ipac_3b");
        this.ipac_3c = getBySelect("ipac_3c");
        this.ipac_3d = getBySelect_time("ipac_3d");
        this.ipac_3e = getBySelect("ipac_3e");
        this.ipac_3f = getBySelect_time("ipac_3f");

        this.ipac_4a = getBySelect("ipac_4a");
        this.ipac_4b = getBySelect_time("ipac_4b");
        this.ipac_4c = getBySelect("ipac_4c");
        this.ipac_4d = getBySelect_time("ipac_4d");
        this.ipac_4e = getBySelect("ipac_4e");
        this.ipac_4f = getBySelect_time("ipac_4f");

        this.ipac_5a = getBySelect_time("ipac_5a");
        this.ipac_5b = getBySelect_time("ipac_5b");
    }
 
    function getBySelect(id){
        return $("#" + id).val();
    }

    function getBySelect_time(id){
        var x = $("#" + id + "_h").val() + ":" + $("#" + id + "_m").val() + ":00";
        return moment(x, "HH:mm:ss");
    }

    var trintaMinutos = moment("00:30:00", "HH:mm:ss");
    var vinteMinutos = moment("00:20:00", "HH:mm:ss");
    var ipacAnswer;
    function calcular(){
        ipacAnswer = new IpacAnswer();

        var diasVigorosa = parseInt(ipacAnswer.ipac_1f) + parseInt(ipacAnswer.ipac_3e) + parseInt(ipacAnswer.ipac_4e);
        var diasModerada = parseInt(ipacAnswer.ipac_1d) + parseInt(ipacAnswer.ipac_3a) + parseInt(ipacAnswer.ipac_3c) + parseInt(ipacAnswer.ipac_4c);
        var diasCaminhada = parseInt(ipacAnswer.ipac_2e) + parseInt(ipacAnswer.ipac_4a);
        
        var minutosVigorosa = ipacAnswer.ipac_1g.add(parseInt(ipacAnswer.ipac_3f.format("HH")), "hours").add(parseInt(ipacAnswer.ipac_3f.format("mm")), "minutes").add(parseInt(ipacAnswer.ipac_4f.format("HH")), "hours").add(parseInt(ipacAnswer.ipac_4f.format("mm")), "minutes");
        // var minutosVigorosa = parseInt(ipacAnswer.ipac_1g) + parseInt(ipacAnswer.ipac_3f) + parseInt(ipacAnswer.ipac_4f);
        var minutosModerada = ipacAnswer.ipac_1e.add(parseInt(ipacAnswer.ipac_3b.format("HH")), "hours").add(parseInt(ipacAnswer.ipac_3b.format("mm")), "minutes").add(parseInt(ipacAnswer.ipac_3d.format("HH")), "hours").add(parseInt(ipacAnswer.ipac_3d.format("mm")), "minutes").add(parseInt(ipacAnswer.ipac_4d.format("HH")), "hours").add(parseInt(ipacAnswer.ipac_4d.format("mm")), "minutes");
        // var minutosModerada = parseInt(ipacAnswer.ipac_1e) + parseInt(ipacAnswer.ipac_3b) + parseInt(ipacAnswer.ipac_3d) + parseInt(ipacAnswer.ipac_4d);
        var minutosCaminhada = ipacAnswer.ipac_2f.add(parseInt(ipacAnswer.ipac_4b.format("HH")), "hours").add(parseInt(ipacAnswer.ipac_4b.format("mm")), "minutes");
        // var minutosCaminhada = parseInt(ipacAnswer.ipac_2f) + parseInt(ipacAnswer.ipac_4b);
        var diasOutraAtividade = parseInt(ipacAnswer.ipac_1b) + parseInt(ipacAnswer.ipac_2a) + parseInt(ipacAnswer.ipac_2c);

        console.log(diasVigorosa, diasModerada, diasCaminhada, minutosVigorosa, minutosModerada, minutosCaminhada, diasOutraAtividade);

        var trintaMinutos = moment("00:30:00", "HH:mm:ss");
        var vinteMinutos = moment("00:20:00", "HH:mm:ss");
        var diasVigorosa30min = parseInt(ipacAnswer.ipac_1g.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_1f) + 
            parseInt(ipacAnswer.ipac_3f.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_3e) + 
            parseInt(ipacAnswer.ipac_4f.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_4e);
        var diasVigorosa20min = parseInt(ipacAnswer.ipac_1g.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_1f) + 
            parseInt(ipacAnswer.ipac_3f.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_3e) + 
            parseInt(ipacAnswer.ipac_4f.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_4e);
        var diasModerada30min = parseInt(ipacAnswer.ipac_1e.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_1d) + 
            parseInt(ipacAnswer.ipac_3b.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_3a) + 
            parseInt(ipacAnswer.ipac_3d.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_3c) + 
            parseInt(ipacAnswer.ipac_4d.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_4c);
        var diasCaminhada30min = parseInt(ipacAnswer.ipac_2f.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_2e) + 
            parseInt(ipacAnswer.ipac_4b.isBefore(trintaMinutos) ? 0 : ipacAnswer.ipac_4a);

        console.log("before", trintaMinutos, ipacAnswer.ipac_1e, trintaMinutos.isBefore(ipacAnswer.ipac_1e));
        console.log(diasVigorosa30min, diasVigorosa20min, diasModerada30min, diasCaminhada30min);
        var atividadesSomadasDias = diasVigorosa + diasModerada + diasCaminhada;
        var atividadesSomadasMinutos = minutosVigorosa.add(parseInt(minutosModerada.format("HH")), "hours").add(parseInt(minutosModerada.format("mm")), "minutes").add(parseInt(minutosCaminhada.format("HH")), "hours").add(parseInt(minutosCaminhada.format("mm")), "minutes");
        // var atividadesSomadasMinutos = minutosVigorosa + minutosModerada + minutosCaminhada;
        var duasHoraseMeia = moment("02:30:00", "HH:mm:ss");

        console.log(atividadesSomadasDias, atividadesSomadasMinutos);

        var result = "Nada";
        if(diasVigorosa30min >= 5 || (diasVigorosa20min >= 3 && (diasModerada30min >= 5 || diasCaminhada30min >= 5))){
            result = "Muito Ativo";
        }
        else if(diasVigorosa20min >= 3 || (diasModerada30min >= 5 || diasCaminhada30min >= 5) || (atividadesSomadasDias >= 5 && duasHoraseMeia.isBefore(atividadesSomadasMinutos))){
            result = "Ativo";
        }
        else if(atividadesSomadasDias >= 5 || duasHoraseMeia.isBefore(atividadesSomadasMinutos)){
            result = "Irregularmente ativo A";
        }
        else if(atividadesSomadasDias > 0){
            result = "Irregularmente ativo B";
        }
        else if(atividadesSomadasDias == 0){
            result = "Sedentário";
        }

        alert(result);
    }
    
</script>

</body>
</html>
